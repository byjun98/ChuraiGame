{% verbatim %}
<!-- Home Tab -->
<div v-if="currentTab === 'home'" class="space-y-12">
    <div class="bg-white p-8 rounded-[2.5rem] shadow-sm relative overflow-hidden border border-gray-100">
        <div class="relative z-10">
            <h2 class="text-3xl font-bold leading-tight mb-2">
                <span class="text-blue-600">{{ user?.nickname || '게이머' }}</span>님의<br>
                취향을 분석했어요
            </h2>
            <p class="text-gray-500 mb-8">최근 플레이한 게임을 바탕으로 추천해드려요.</p>
            <button @click="currentTab = 'recommend'"
                class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors">
                추천 리스트 보기
            </button>
        </div>
        <div class="absolute top-0 right-0 w-64 h-64 bg-blue-100 rounded-full blur-3xl opacity-50 -mr-16 -mt-16">
        </div>
    </div>

    <!-- Game Discovery Section -->
    <div>
        <div class="flex flex-col sm:flex-row sm:items-center justify-between mb-6 gap-4">
            <h3 class="text-xl font-bold flex items-center gap-2">
                <i class="ph-fill ph-compass text-blue-500"></i> 게임 둘러보기
            </h3>

            <!-- Tabs -->
            <div class="flex bg-gray-100 p-1 rounded-xl self-start sm:self-auto">
                <button @click="loadGameTab('popular')"
                    :class="{'bg-white shadow-sm text-blue-600': gameTab === 'popular', 'text-gray-500 hover:text-gray-700': gameTab !== 'popular'}"
                    class="px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 whitespace-nowrap">
                    요즘 뜨는
                </button>
                <button @click="loadGameTab('top-rated')"
                    :class="{'bg-white shadow-sm text-blue-600': gameTab === 'top-rated', 'text-gray-500 hover:text-gray-700': gameTab !== 'top-rated'}"
                    class="px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 whitespace-nowrap">
                    평점 높은
                </button>
                <button @click="loadGameTab('new-releases')"
                    :class="{'bg-white shadow-sm text-blue-600': gameTab === 'new-releases', 'text-gray-500 hover:text-gray-700': gameTab !== 'new-releases'}"
                    class="px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 whitespace-nowrap">
                    신작 게임
                </button>
            </div>
        </div>

        <!-- content -->
        <div class="relative min-h-[300px]">
            <!-- Loading -->
            <div v-if="isLoadingGames"
                class="absolute inset-0 flex items-center justify-center z-10 bg-white/50 backdrop-blur-sm rounded-xl">
                <div class="w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div>
            </div>

            <!-- Left Arrow Button -->
            <button @click="scrollGameList('left')" v-show="!isLoadingGames && rawgGames.length > 4"
                class="absolute left-0 top-1/2 -translate-y-1/2 z-20 w-12 h-12 bg-white/90 hover:bg-white shadow-lg rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 -ml-2 sm:-ml-4 border border-gray-200">
                <i class="ph-bold ph-caret-left text-xl text-gray-700"></i>
            </button>

            <!-- Right Arrow Button -->
            <button @click="scrollGameList('right')" v-show="!isLoadingGames && rawgGames.length > 4"
                class="absolute right-0 top-1/2 -translate-y-1/2 z-20 w-12 h-12 bg-white/90 hover:bg-white shadow-lg rounded-full flex items-center justify-center transition-all duration-300 hover:scale-110 -mr-2 sm:-mr-4 border border-gray-200">
                <i class="ph-bold ph-caret-right text-xl text-gray-700"></i>
            </button>

            <!-- List -->
            <div ref="gameListContainer"
                class="flex overflow-x-auto gap-5 pb-6 -mx-4 px-4 sm:mx-0 sm:px-0 no-scrollbar scroll-smooth">
                <a v-for="game in rawgGames" :key="game.rawg_id" :href="`/games/${game.rawg_id}/`"
                    class="shrink-0 w-64 group cursor-pointer transition-opacity duration-200"
                    :class="{'opacity-50': isLoadingGames}">
                    <div class="relative rounded-2xl overflow-hidden shadow-md aspect-[16/9] mb-3 bg-gray-200">
                        <img :src="game.image_url"
                            class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                            @error="handleImageError" loading="lazy">
                        <div
                            class="absolute top-2 right-2 bg-black/60 backdrop-blur-md text-white px-2 py-1 rounded-lg text-xs font-bold flex items-center gap-1">
                            <i class="ph-fill ph-star text-yellow-400"></i>
                            {{ game.rating }}
                        </div>
                    </div>
                    <h4 class="font-bold text-gray-800 truncate">{{ game.title }}</h4>
                    <div class="flex items-center gap-2 text-sm text-gray-500">
                        <span>{{ game.released ? game.released.split('-')[0] : 'TBA' }}</span>
                        <span v-if="game.genres && game.genres.length > 0">{{ game.genres[0] }}</span>
                    </div>
                </a>

                <!-- Empty State -->
                <div v-if="!isLoadingGames && rawgGames.length === 0"
                    class="w-full shrink-0 flex flex-col items-center justify-center py-12 text-gray-400">
                    <i class="ph ph-ghost text-4xl mb-2"></i>
                    <p>게임 데이터를 불러올 수 없습니다.</p>
                </div>
            </div>

            <!-- Game Count Info -->
            <div v-if="!isLoadingGames && rawgGames.length > 0" class="text-center text-sm text-gray-400 mt-2">
                총 {{ rawgGames.length }}개 게임 · 좌우로 스크롤하거나 화살표를 클릭하세요
            </div>
        </div>
    </div>
</div>
{% endverbatim %}